<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Quiz Maker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            margin: 0;
            padding: 20px;
        }
        header {
            text-align: center;
            padding: 10px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .question-block {
            margin-bottom: 20px;
        }
        .question-block input {
            margin-right: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        #quiz-result {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>Online Quiz Maker</h1>
        <p>Welcome! Create and take quizzes with ease.</p>
    </header>

    <div class="container" id="home-page">
        <h2>Select an option:</h2>
        <button onclick="showCreateQuiz()">Create a Quiz</button>
        <button onclick="showQuizList()">Take a Quiz</button>
    </div>

    <!-- Quiz Creation -->
    <div class="container" id="create-quiz-page" style="display:none;">
        <h2>Create a Quiz</h2>
        <form id="quizForm">
            <label for="quizTitle">Quiz Title:</label><br>
            <input type="text" id="quizTitle" name="quizTitle" required><br><br>
            
            <div id="questionContainer"></div>
            
            <button type="button" onclick="addQuestion()">Add Question</button>
            <button type="submit">Save Quiz</button>
        </form>
    </div>

    <!-- Quiz List -->
    <div class="container" id="quiz-list-page" style="display:none;">
        <h2>Available Quizzes</h2>
        <ul id="quizList"></ul>
        <button onclick="showHomePage()">Back</button>
    </div>

    <!-- Quiz Taking -->
    <div class="container" id="take-quiz-page" style="display:none;">
        <h2 id="quizTitleDisplay"></h2>
        <form id="quizQuestionsForm"></form>
    </div>

    <!-- Quiz Results -->
    <div class="container" id="quiz-result">
        <h2>Quiz Results</h2>
        <p id="quizScore"></p>
        <button onclick="showQuizList()">Back to Quiz List</button>
    </div>

    <script>
        let quizzes = [];
        let currentQuizIndex = null;

        // Show the quiz creation page
        function showCreateQuiz() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('create-quiz-page').style.display = 'block';
        }

        // Show the quiz list page
        function showQuizList() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('create-quiz-page').style.display = 'none';
            document.getElementById('take-quiz-page').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'none';

            const quizListElement = document.getElementById('quizList');
            quizListElement.innerHTML = '';

            quizzes.forEach((quiz, index) => {
                const listItem = document.createElement('li');
                listItem.innerHTML = `<button onclick="startQuiz(${index})">${quiz.title}</button>`;
                quizListElement.appendChild(listItem);
            });

            document.getElementById('quiz-list-page').style.display = 'block';
        }

        // Show the home page
        function showHomePage() {
            document.getElementById('home-page').style.display = 'block';
            document.getElementById('create-quiz-page').style.display = 'none';
            document.getElementById('quiz-list-page').style.display = 'none';
            document.getElementById('take-quiz-page').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'none';
        }

        // Add a question input field for quiz creation
        function addQuestion() {
            const questionContainer = document.getElementById('questionContainer');
            const questionNumber = questionContainer.childElementCount + 1;

            const questionBlock = document.createElement('div');
            questionBlock.className = 'question-block';
            questionBlock.innerHTML = `
                <label for="question${questionNumber}">Question ${questionNumber}:</label><br>
                <input type="text" id="question${questionNumber}" name="question${questionNumber}" required><br><br>
                <label for="options${questionNumber}">Options (comma-separated):</label><br>
                <input type="text" id="options${questionNumber}" name="options${questionNumber}" required><br><br>
                <label for="correctAnswer${questionNumber}">Correct Answer:</label><br>
                <input type="text" id="correctAnswer${questionNumber}" name="correctAnswer${questionNumber}" required><br><br>
            `;

            questionContainer.appendChild(questionBlock);
        }

        // Handle quiz form submission (save quiz)
        document.getElementById('quizForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const title = document.getElementById('quizTitle').value;
            const questions = [];

            const questionBlocks = document.getElementById('questionContainer').children;
            for (let i = 0; i < questionBlocks.length; i++) {
                const questionText = questionBlocks[i].querySelector(`input[name=question${i + 1}]`).value;
                const options = questionBlocks[i].querySelector(`input[name=options${i + 1}]`).value.split(',');
                const correctAnswer = questionBlocks[i].querySelector(`input[name=correctAnswer${i + 1}]`).value;

                questions.push({ questionText, options, correctAnswer });
            }

            const newQuiz = { title, questions };
            quizzes.push(newQuiz);

            // Reset form and redirect to quiz list
            document.getElementById('quizForm').reset();
            document.getElementById('questionContainer').innerHTML = '';
            showQuizList();
        });

        // Start a quiz (display questions one at a time)
        function startQuiz(index) {
            currentQuizIndex = index;
            const quiz = quizzes[index];

            document.getElementById('quizTitleDisplay').innerText = quiz.title;
            const quizQuestionsForm = document.getElementById('quizQuestionsForm');
            quizQuestionsForm.innerHTML = '';

            quiz.questions.forEach((question, qIndex) => {
                const questionBlock = document.createElement('div');
                questionBlock.className = 'question-block';
                questionBlock.innerHTML = `
                    <p>${question.questionText}</p>
                    ${question.options.map((option, oIndex) => `
                        <input type="radio" id="q${qIndex}o${oIndex}" name="question${qIndex}" value="${option.trim()}">
                        <label for="q${qIndex}o${oIndex}">${option.trim()}</label><br>
                    `).join('')}
                `;
                quizQuestionsForm.appendChild(questionBlock);
            });

            const submitButton = document.createElement('button');
            submitButton.type = 'button';
            submitButton.innerText = 'Submit Quiz';
            submitButton.onclick = submitQuiz;
            quizQuestionsForm.appendChild(submitButton);

            document.getElementById('quiz-list-page').style.display = 'none';
            document.getElementById('take-quiz-page').style.display = 'block';
        }

        // Submit the quiz and show results
        function submitQuiz() {
            const quiz = quizzes[currentQuizIndex];
            let score = 0;

            quiz.questions.forEach((question, qIndex) => {
                const selectedOption = document.querySelector(`input[name="question${qIndex}"]:checked`);
                if (selectedOption && selectedOption.value === question.correctAnswer.trim()) {
                    score++;
                }
            });

            document.getElementById('quizScore').innerText = `You scored ${score} out of ${quiz.questions.length}.`;
            document.getElementById('take-quiz-page').style.display = 'none';
            document.getElementById('quiz-result').style.display = 'block';
        }
    </script>
</body>
</html>
